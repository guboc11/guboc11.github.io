<!DOCTYPE html>
<html class="no-js" lang="en">
	<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Go 패키지 코드가 실행되기 전까지 어떤 일이 일어날까?(Build and Runtime Overview) - Tawon&#39;s Dev Blog</title>
		<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
		<meta name="description"
			content="">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="dns-prefetch" href="//fonts.googleapis.com">
		<link rel="dns-prefetch" href="//fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" >
		<link rel="stylesheet" href="/css/style.css">

		
		<link rel="stylesheet" href="/css/custom.min.css">
		

		<link rel="shortcut icon" href="/favicon.ico">
		
	</head>
	<body class="body">
		<div class="container container--outer">
			<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="Tawon&#39;s Dev Blog" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">Tawon&#39;s Dev Blog</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
			<div class="wrapper flex">
				<div class="primary">
					
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Go 패키지 코드가 실행되기 전까지 어떤 일이 일어날까?(Build and Runtime Overview)</h1>
			<div class="post__date__container">
				<span class="post__docstype"> note </span>
				<span class="post__date">
					<strong class="semibold gray">Created:</strong> 2025-12-04 18:52
					
				</span>
				<span class="post__update__date">
					<strong class="semibold gray">Last Modified:</strong> 2025-12-04 19:38
				</span>
			</div>
			
		</header>
		<div class="content post__content clearfix">
			<p>Go 문법에 대해서는 안 다뤄볼 예정이다. 왜냐하면 <a href="https://go.dev/tour/welcome/1">A Tour of Go</a>에서 잘 설명하고 다른 블로그에서 잘 다루고 있기 때문인다.</p>
<p>대신에 &lsquo;<strong>첫 시작</strong>&lsquo;부분을 건드려 보려고 한다. 무엇이든 어떤 근본적인 부분을 이해하고 나면 그 다음은 이해하기 쉬워지기 마련이다.<br>
아주 간단히 Go 패키지 코드를 작성하고 빌드 및 실행할 때, <strong>main 패키지의 main() 함수가 실행되기 전 까지</strong> 무슨 일이 일어나는지 살펴보자.</p>
<h2 id="모듈-및-패키지-해석">모듈 및 패키지 해석</h2>
<ul>
<li><strong>현재 모듈과 필요한 의존성 파악</strong><br>
package root 에서 <code>go run .</code>를 실행하면 해당 위치에서 <code>go.mod</code>파일을 읽어 <strong>실행에 필요한 모든 모듈과 의존성을 파악</strong>한다.</li>
<li><strong>패키지 의존성 그래프 생성</strong><br>
모든 <code>.go</code> 파일의 <code>import</code>를 분석하고 패키지 의존성 그래프(DAG)를 생성한다. 패키지 의존성 그래프를 <strong>DAG</strong>(Directed Acyclic Graph)로 관리하기 때문에 서로를 import하는 <strong>순환 구조가 되면 컴파일이 안 된다</strong>.</li>
<li><strong>모듈 검증</strong><br>
의존성 그래프에 따라 필요 모듈을 다운로드하고 해시 검증(<code>go.sum</code>)을 수행한다.</li>
</ul>
<h2 id="패키지-빌드">패키지 빌드</h2>
<ul>
<li><strong>패키지 컴파일</strong><br>
패키지 DAG 순서에 따라 각 패키지를 컴파일하는데, 하위 패키지(leaf) 부터 순서대로 컴파일 하여 <code>.o</code> 파일을 생성한다.</li>
<li><strong>바이너리 파일 생성</strong><br>
컴파일이 끝나면 Go 링커는 사용자 패키지의 <code>.o</code> 파일 및 Go 표준 라이브러리, Go 런타임을 링크하여 하나의 바이너리를 생성한다.</li>
</ul>
<h2 id="실행-단계---런타임-초기화">실행 단계 - 런타임 초기화</h2>
<ul>
<li><strong>Go 런타임 진입점 실행</strong><br>
OS가 바이너리를 실행하면 메모리 로드 과정 후 Go 런타임의 진입점(<code>runtime.rt0_go</code>)이 먼저 실행된다.</li>
<li><strong>Go 런타임 초기화</strong><br>
런타임이 스케줄러, 스택, GC 등을 초기화하고 패키지 초기화 절차를 진행한다.</li>
</ul>
<hr>
<h2 id="코드-관점에서-실행-흐름">코드 관점에서 실행 흐름</h2>
<p>만약 패키지에서 다음과 같은 모듈 의존성 DAG를 생성했다고 하자.</p>
<pre tabindex="0"><code>(root) main -&gt; B -&gt; C -&gt; D (leaf)
</code></pre><p>그러면 다음과 같은 순서로 실행된다.<br>
<strong>D</strong> (<code>const</code> 초기화 → <code>var</code> 초기화 → <code>init()</code> 함수 실행)<br>
→ <strong>C</strong> (<code>const</code> 초기화 → <code>var</code> 초기화 → <code>init()</code> 함수 실행)<br>
→ <strong>B</strong> (<code>const</code> 초기화 → <code>var</code> 초기화 → <code>init()</code> 함수 실행)<br>
→ <strong>main</strong> (<code>const</code> 초기화 → <code>var</code> 초기화 → <code>init()</code> 함수 실행 → <code>main.main()</code> 함수 실행)</p>
<h2 id="마무리">마무리</h2>
<p>Go 소스 코드를 살펴볼 때 위 내용을 생각하고 분석하면 도움이 되지 않을까 싶다.</p>
		</div>
		<h2>참고 자료</h2>
		<div class="post__reference">
			<li>
				<ul>
					<a href=https://go.dev/ref/mod#go-mod-file target="_blank"> https://go.dev/ref/mod#go-mod-file </a>
				</ul>
			<li>
				<ul>
					<a href=https://ray5273.tistory.com/entry/Golang-init-%EC%82%AC%EC%9A%A9%EB%B2%95-%EB%B0%8F-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD target="_blank"> https://ray5273.tistory.com/entry/Golang-init-%EC%82%AC%EC%9A%A9%EB%B2%95-%EB%B0%8F-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD </a>
				</ul>
			<li>
				<ul>
					<a href=https://go.dev/doc/modules/managing-source target="_blank"> https://go.dev/doc/modules/managing-source </a>
				</ul>
			<li>
				<ul>
					<a href=https://www.altoros.com/blog/golang-internals-part-5-the-runtime-bootstrap-process/ target="_blank"> https://www.altoros.com/blog/golang-internals-part-5-the-runtime-bootstrap-process/ </a>
				</ul>
			</li>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 0 0 0-6 3 3 0 0 0 0 6"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/go/" rel="tag">go</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>




				</div>
				
			</div>
			<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2025 Tawon&#39;s Dev Blog.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
		</div>
		<script async defer src="/js/menu.js"></script>
		</body>
</html>